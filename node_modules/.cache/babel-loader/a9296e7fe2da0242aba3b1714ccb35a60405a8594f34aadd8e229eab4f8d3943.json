{"ast":null,"code":"var _jsxFileName = \"/Users/nilesh/Documents/Smart-DevOps/dora-ui/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport Dropdown from './Dropdown';\nimport MetricsTable from './MetricsTable';\nimport './demo.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [selectedApp, setSelectedApp] = useState('');\n  const [metricsData, setMetricsData] = useState(null);\n  const handleViewMetrics = async () => {\n    try {\n      const response = await fetch(`http://localhost/metrics?app_name=${selectedApp}`);\n      const data = await response.json();\n      setMetricsData(data);\n    } catch (error) {\n      console.error('Error fetching metrics:', error);\n    }\n  };\n  const runOpenAIQuery = async () => {\n    const openaiApiKey = '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';\n    const headers = {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${openaiApiKey}`\n    };\n    const appName = selectedApp;\n    const totalDeployments = (metricsData === null || metricsData === void 0 ? void 0 : metricsData.total_deployments) || 0;\n    const failedDeployments = (metricsData === null || metricsData === void 0 ? void 0 : metricsData.failed_deployments) || 0;\n    const queryPrompt = `\n      Generate a comprehensive DevOps metrics report in HTML format. Use professional UI with CSS orange and white table format. Include details such as the total deployments, failed deployments, deployment success rate, change failure rate, and corresponding categories (Elite, High, Medium, Low). Additionally, provide detailed recommendations for each category based on the metrics. This report will help in assessing and improving the efficiency of the application's DevOps practices.\" \n      Note that return only HTML code. Also add save to pdf option in HTML page.\n      Application Name: ${appName}\n      Total deployment: ${totalDeployments}\n      Failed deployment: ${failedDeployments}\n    `;\n    const data = {\n      model: \"gpt-3.5-turbo\",\n      messages: [{\n        role: \"user\",\n        content: queryPrompt\n      }],\n      temperature: 0.7\n    };\n    try {\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: headers,\n        body: JSON.stringify(data)\n      });\n      if (response.ok) {\n        const result = await response.json();\n        const generatedText = result.choices[0].message.content;\n        console.log(\"Generated Text:\");\n        console.log(generatedText);\n\n        // You can handle the generated text as needed\n        // For now, let's display it in an alert\n        alert(generatedText);\n      } else {\n        console.error(`Error: ${response.status} - ${response.statusText}`);\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    }\n  };\n  const handleDORARecommendationReport = async () => {\n    try {\n      const response = await fetch(`http://localhost/metrics?app_name=${selectedApp}`);\n      const data = await response.json();\n      alert(`DORA Application Name: ${selectedApp}\\nTotal Deployments: ${data.total_deployments}\\nPassed Deployments: ${data.passed_deployments}\\nFailed Deployments: ${data.failed_deployments}`);\n      // Run OpenAI query after displaying DORA report\n      await runOpenAIQuery();\n    } catch (error) {\n      console.error('Error fetching metrics:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"DORA Metrics Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n      setSelectedApp: setSelectedApp\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleViewMetrics,\n      children: \"View Metrics\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), metricsData && /*#__PURE__*/_jsxDEV(MetricsTable, {\n      metricsData: metricsData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: runOpenAIQuery,\n      children: \"DORA Recommendation Report\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"nB2Mmm6ncGZm5g03U1vwWXkeq+k=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","Dropdown","MetricsTable","jsxDEV","_jsxDEV","App","_s","selectedApp","setSelectedApp","metricsData","setMetricsData","handleViewMetrics","response","fetch","data","json","error","console","runOpenAIQuery","openaiApiKey","headers","appName","totalDeployments","total_deployments","failedDeployments","failed_deployments","queryPrompt","model","messages","role","content","temperature","method","body","JSON","stringify","ok","result","generatedText","choices","message","log","alert","status","statusText","handleDORARecommendationReport","passed_deployments","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/Users/nilesh/Documents/Smart-DevOps/dora-ui/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport Dropdown from './Dropdown';\nimport MetricsTable from './MetricsTable';\nimport './demo.css';\n\nfunction App() {\n  const [selectedApp, setSelectedApp] = useState('');\n  const [metricsData, setMetricsData] = useState(null);\n\n  const handleViewMetrics = async () => {\n    try {\n      const response = await fetch(`http://localhost/metrics?app_name=${selectedApp}`);\n      const data = await response.json();\n      setMetricsData(data);\n    } catch (error) {\n      console.error('Error fetching metrics:', error);\n    }\n  };\n\n  const runOpenAIQuery = async () => {\n    const openaiApiKey = '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';\n    const headers = {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${openaiApiKey}`\n    };\n\n    const appName = selectedApp;\n    const totalDeployments = metricsData?.total_deployments || 0;\n    const failedDeployments = metricsData?.failed_deployments || 0;\n\n    const queryPrompt = `\n      Generate a comprehensive DevOps metrics report in HTML format. Use professional UI with CSS orange and white table format. Include details such as the total deployments, failed deployments, deployment success rate, change failure rate, and corresponding categories (Elite, High, Medium, Low). Additionally, provide detailed recommendations for each category based on the metrics. This report will help in assessing and improving the efficiency of the application's DevOps practices.\" \n      Note that return only HTML code. Also add save to pdf option in HTML page.\n      Application Name: ${appName}\n      Total deployment: ${totalDeployments}\n      Failed deployment: ${failedDeployments}\n    `;\n\n    const data = {\n      model: \"gpt-3.5-turbo\",\n      messages: [{ role: \"user\", content: queryPrompt }],\n      temperature: 0.7\n    };\n\n    try {\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: headers,\n        body: JSON.stringify(data)\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        const generatedText = result.choices[0].message.content;\n\n        console.log(\"Generated Text:\");\n        console.log(generatedText);\n\n        // You can handle the generated text as needed\n        // For now, let's display it in an alert\n        alert(generatedText);\n      } else {\n        console.error(`Error: ${response.status} - ${response.statusText}`);\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    }\n  };\n\n  const handleDORARecommendationReport = async () => {\n    try {\n      const response = await fetch(`http://localhost/metrics?app_name=${selectedApp}`);\n      const data = await response.json();\n      alert(`DORA Application Name: ${selectedApp}\\nTotal Deployments: ${data.total_deployments}\\nPassed Deployments: ${data.passed_deployments}\\nFailed Deployments: ${data.failed_deployments}`);\n      // Run OpenAI query after displaying DORA report\n      await runOpenAIQuery();\n    } catch (error) {\n      console.error('Error fetching metrics:', error);\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>DORA Metrics Dashboard</h1>\n      <Dropdown setSelectedApp={setSelectedApp} />\n      <button onClick={handleViewMetrics}>View Metrics</button>\n      {metricsData && <MetricsTable metricsData={metricsData} />}\n      <button onClick={runOpenAIQuery}>DORA Recommendation Report</button>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}