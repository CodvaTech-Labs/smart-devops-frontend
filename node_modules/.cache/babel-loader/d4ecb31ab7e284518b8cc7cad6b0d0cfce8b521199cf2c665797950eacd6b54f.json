{"ast":null,"code":"import React,{useState}from'react';import Dropdown from'./Dropdown';import MetricsTable from'./MetricsTable';import'./demo.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[selectedApp,setSelectedApp]=useState('');const[metricsData,setMetricsData]=useState(null);const[generatedText,setGeneratedText]=useState('');const handleViewMetrics=async()=>{try{const response=await fetch(\"http://devops-backend-788241747.ap-south-1.elb.amazonaws.com/metrics?app_name=\".concat(selectedApp));const data=await response.json();setMetricsData(data);}catch(error){console.error('Error fetching metrics:',error);}};const runOpenAIQuery=async()=>{const openaiApiKey='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';const headers={'Content-Type':'application/json','Authorization':\"Bearer \".concat(openaiApiKey)};const appName=selectedApp;const totalDeployments=(metricsData===null||metricsData===void 0?void 0:metricsData.total_deployments)||0;const failedDeployments=(metricsData===null||metricsData===void 0?void 0:metricsData.failed_deployments)||0;const queryPrompt=\"\\n      Generate a comprehensive DevOps metrics report in HTML format. Use professional UI with CSS orange and white table format. Include details such as the total deployments, failed deployments, deployment success rate, change failure rate, and corresponding categories (Elite, High, Medium, Low). Additionally, provide detailed recommendations for each category based on the metrics. This report will help in assessing and improving the efficiency of the application's DevOps practices.\\\" \\n      Note that return only HTML code. Also add save to pdf option in HTML page.\\n      Application Name: \".concat(appName,\"\\n      Total deployment: \").concat(totalDeployments,\"\\n      Failed deployment: \").concat(failedDeployments,\"\\n    \");const data={model:\"gpt-3.5-turbo\",messages:[{role:\"user\",content:queryPrompt}],temperature:0.7};try{const response=await fetch('https://api.openai.com/v1/chat/completions',{method:'POST',headers:headers,body:JSON.stringify(data)});if(response.ok){const result=await response.json();const generatedText=result.choices[0].message.content;// Set the generated text to the state\nsetGeneratedText(generatedText);}else{console.error(\"Error: \".concat(response.status,\" - \").concat(response.statusText));}}catch(error){console.error('Error fetching data:',error);}};const handleDORARecommendationReport=async()=>{try{const response=await fetch(\"http://devops-backend-788241747.ap-south-1.elb.amazonaws.com/metrics?app_name=\".concat(selectedApp));const data=await response.json();alert(\"DORA Application Name: \".concat(selectedApp,\"\\nTotal Deployments: \").concat(data.total_deployments,\"\\nPassed Deployments: \").concat(data.passed_deployments,\"\\nFailed Deployments: \").concat(data.failed_deployments));// Run OpenAI query after displaying DORA report\nawait runOpenAIQuery();}catch(error){console.error('Error fetching metrics:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"DORA Metrics Dashboard\"}),/*#__PURE__*/_jsx(Dropdown,{setSelectedApp:setSelectedApp}),/*#__PURE__*/_jsx(\"button\",{onClick:handleViewMetrics,children:\"View Metrics\"}),metricsData&&/*#__PURE__*/_jsx(MetricsTable,{metricsData:metricsData}),/*#__PURE__*/_jsx(\"button\",{onClick:runOpenAIQuery,children:\"DORA Recommendation Report\"}),generatedText&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"DORA Recommendation\"}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:generatedText}})]})]});}export default App;","map":{"version":3,"names":["React","useState","Dropdown","MetricsTable","jsx","_jsx","jsxs","_jsxs","App","selectedApp","setSelectedApp","metricsData","setMetricsData","generatedText","setGeneratedText","handleViewMetrics","response","fetch","concat","data","json","error","console","runOpenAIQuery","openaiApiKey","headers","appName","totalDeployments","total_deployments","failedDeployments","failed_deployments","queryPrompt","model","messages","role","content","temperature","method","body","JSON","stringify","ok","result","choices","message","status","statusText","handleDORARecommendationReport","alert","passed_deployments","className","children","onClick","dangerouslySetInnerHTML","__html"],"sources":["/Users/nilesh/Documents/Smart-DevOps/dora-ui/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport Dropdown from './Dropdown';\nimport MetricsTable from './MetricsTable';\nimport './demo.css';\n\nfunction App() {\n  const [selectedApp, setSelectedApp] = useState('');\n  const [metricsData, setMetricsData] = useState(null);\n  const [generatedText, setGeneratedText] = useState('');\n\n  const handleViewMetrics = async () => {\n    try {\n      const response = await fetch(`http://devops-backend-788241747.ap-south-1.elb.amazonaws.com/metrics?app_name=${selectedApp}`);\n      const data = await response.json();\n      setMetricsData(data);\n    } catch (error) {\n      console.error('Error fetching metrics:', error);\n    }\n  };\n\n  const runOpenAIQuery = async () => {\n    const openaiApiKey = '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';\n    const headers = {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${openaiApiKey}`\n    };\n\n    const appName = selectedApp;\n    const totalDeployments = metricsData?.total_deployments || 0;\n    const failedDeployments = metricsData?.failed_deployments || 0;\n\n    const queryPrompt = `\n      Generate a comprehensive DevOps metrics report in HTML format. Use professional UI with CSS orange and white table format. Include details such as the total deployments, failed deployments, deployment success rate, change failure rate, and corresponding categories (Elite, High, Medium, Low). Additionally, provide detailed recommendations for each category based on the metrics. This report will help in assessing and improving the efficiency of the application's DevOps practices.\" \n      Note that return only HTML code. Also add save to pdf option in HTML page.\n      Application Name: ${appName}\n      Total deployment: ${totalDeployments}\n      Failed deployment: ${failedDeployments}\n    `;\n\n    const data = {\n      model: \"gpt-3.5-turbo\",\n      messages: [{ role: \"user\", content: queryPrompt }],\n      temperature: 0.7\n    };\n\n    try {\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: headers,\n        body: JSON.stringify(data)\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        const generatedText = result.choices[0].message.content;\n\n        // Set the generated text to the state\n        setGeneratedText(generatedText);\n      } else {\n        console.error(`Error: ${response.status} - ${response.statusText}`);\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    }\n  };\n\n  const handleDORARecommendationReport = async () => {\n    try {\n      const response = await fetch(`http://devops-backend-788241747.ap-south-1.elb.amazonaws.com/metrics?app_name=${selectedApp}`);\n      const data = await response.json();\n      alert(`DORA Application Name: ${selectedApp}\\nTotal Deployments: ${data.total_deployments}\\nPassed Deployments: ${data.passed_deployments}\\nFailed Deployments: ${data.failed_deployments}`);\n      // Run OpenAI query after displaying DORA report\n      await runOpenAIQuery();\n    } catch (error) {\n      console.error('Error fetching metrics:', error);\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>DORA Metrics Dashboard</h1>\n      <Dropdown setSelectedApp={setSelectedApp} />\n      <button onClick={handleViewMetrics}>View Metrics</button>\n      {metricsData && <MetricsTable metricsData={metricsData} />}\n      <button onClick={runOpenAIQuery}>DORA Recommendation Report</button>\n      \n      {/* Render the generated text */}\n      {generatedText && (\n        <div>\n          <h2>DORA Recommendation</h2>\n          <div dangerouslySetInnerHTML={{ __html: generatedText }} />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}